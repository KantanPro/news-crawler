# News Crawler

指定されたニュースソースから自動的に記事を取得し、WordPressサイトに投稿として追加するプラグインです。

## 概要

このプラグインは、設定したニュースソース（RSSフィードやニュースサイト）からキーワードにマッチした記事を自動的に取得し、1つの投稿にまとめて作成します。

## 主な機能

- 複数のニュースソースからの記事取得
- キーワードベースの記事フィルタリング
- 重複記事の自動スキップ
- 品質スコアによる記事の選別
- 手動実行による記事取得
- テスト機能によるソース確認

## インストール方法

1. プラグインファイルを `wp-content/plugins/news-crawler/` ディレクトリにアップロード
2. WordPress管理画面でプラグインを有効化
3. 設定 → News Crawler で設定を行う

## 設定項目

### 基本設定

- **最大記事数**: 1つの投稿に含める記事の最大数（1-50件）
- **キーワード設定**: 1行に1キーワードを入力（例：AI, テクノロジー, ビジネス）
- **ニュースソース**: 1行に1URLを入力（RSSフィードまたはニュースサイト）
- **投稿カテゴリー**: 投稿するカテゴリー名
- **投稿ステータス**: 下書き、公開、非公開、承認待ちから選択

## 使用方法

### 1. 設定の保存

1. 設定画面で各項目を入力
2. 「設定を保存」をクリック

### 2. 手動実行

1. 「手動実行」ボタンをクリック
2. 処理結果を確認

### 3. テスト取得

1. 「テスト取得」ボタンをクリック
2. 各ニュースソースの取得状況を確認

## 記事の品質評価

プラグインは以下の基準で記事の品質を評価します：

- **タイトル長**: 10-100文字（+0.3点）
- **本文長**: 100文字以上（+0.4点）
- **画像**: 画像URLの有無（+0.1点）
- **日付**: 公開日の有無（+0.1点）
- **ソース**: ソース情報の有無（+0.1点）

品質スコアが0.3未満の記事は自動的にスキップされます。

## 重複チェック

以下の条件で重複記事をチェックします：

- 7日以内の類似タイトル
- 既存のソースURL

## トラブルシューティング

### 記事が投稿されない場合

1. **品質スコアの確認**: デバッグ情報で品質スコアを確認
2. **重複チェック**: 既存記事との重複を確認
3. **キーワードマッチ**: キーワードが正しく設定されているか確認

### よくある問題

- **品質スコアが低い**: 記事の本文が短い、タイトルが短い
- **重複でスキップ**: 類似の記事が既に存在
- **キーワードマッチなし**: 設定したキーワードが記事に含まれていない

## デバッグ情報

手動実行時に以下の情報が表示されます：

- 各ソースからの記事取得数
- キーワードマッチした記事数
- 各記事の品質スコア詳細
- スキップされた記事の理由
- 作成された投稿の情報

## 技術仕様

- **PHP**: 7.4以上
- **WordPress**: 5.0以上
- **対応形式**: RSS/Atom、HTML
- **文字エンコーディング**: UTF-8

## 更新履歴

### Version 1.1.0
- 品質スコアの計算ロジックを改善
- 重複チェックの期間を30日から7日に短縮
- デバッグ情報の詳細化
- RSSとHTMLの両方の記事形式に対応

### Version 1.0.0
- 初回リリース

## ライセンス

MIT License

## 作者

KantanPro - https://github.com/KantanPro

## サポート

問題や質問がある場合は、GitHubのIssuesページでお知らせください。
